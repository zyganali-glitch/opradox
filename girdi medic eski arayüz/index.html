<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <title>opradox â€“ Excel Doktoru</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" href="css/style.css" />
    <script defer src="js/app.js"></script>

<style>
  .gm-feedback-button {
    position: fixed;
    right: 16px;
    bottom: 16px;
    z-index: 50;
    padding: 10px 16px;
    border-radius: 999px;
    border: none;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    background: #2b2b5f;
    color: #f9f9ff;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  }

  .gm-feedback-button:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
  }

  .gm-feedback-modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.45);
    display: none; /* Ã–NEMLÄ°: BaÅŸta gizli */
    align-items: center;
    justify-content: center;
    z-index: 60;
  }

  .gm-feedback-modal-open {
    display: flex;
  }

  .gm-feedback-modal-content {
    background: #ffffff;
    border-radius: 16px;
    padding: 20px 24px;
    max-width: 420px;
    width: 90%;
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.25);
    position: relative;
  }

  .gm-feedback-close {
    position: absolute;
    top: 8px;
    right: 10px;
    border: none;
    background: transparent;
    font-size: 20px;
    cursor: pointer;
  }

  .gm-feedback-title {
    margin: 0 0 12px 0;
    font-size: 18px;
  }

  .gm-feedback-form label {
    display: block;
    font-size: 13px;
    margin-top: 8px;
    margin-bottom: 4px;
  }

  .gm-feedback-form input,
  .gm-feedback-form select,
  .gm-feedback-form textarea {
    width: 100%;
    box-sizing: border-box;
    padding: 8px 10px;
    border-radius: 8px;
    border: 1px solid #d0d0e0;
    font-size: 13px;
  }

  .gm-feedback-form textarea {
    resize: vertical;
  }

  .gm-feedback-submit {
    margin-top: 12px;
    width: 100%;
    padding: 10px;
    border-radius: 999px;
    border: none;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    background: #4c5ad0;
    color: white;
  }

  .gm-feedback-status {
    margin-top: 6px;
    font-size: 12px;
    color: #333;
  }

  .gm-feedback-error {
    color: #b00020;
  }
</style>

</head>
<body>
<div class="gm-app-root">
    <header class="gm-header">
        <div class="gm-logo-box">
            <img src="img/opradox_logo.png" alt="opradox Logo" class="gm-logo-img" />
            <div class="gm-logo-text">
                <span class="gm-logo-title">Grid<span>Medic</span></span>
                <span class="gm-logo-subtitle">Excel Doktoru</span>
            </div>
        </div>
        <div class="gm-header-right">
            <span class="gm-tag-pill">MVP â€¢ Local</span>
            <span class="gm-lang-pill">TR / EN (soon)</span>
        </div>
    </header>

    <main class="gm-main">
        <!-- Sol taraf: Dosya yÃ¼kleme + senaryo seÃ§imi -->
        <section class="gm-left-pane">
            <div class="gm-card gm-upload-card">
                <h2>1. DosyanÄ± YÃ¼kle</h2>
                <p class="gm-muted">
                    Excel veya CSV dosyanÄ± buradan seÃ§. Senaryolar bu dosya Ã¼zerinde Ã§alÄ±ÅŸacak.
                </p>

                <label class="gm-file-label">
                    <input type="file" id="fileInput" accept=".xlsx,.xls,.csv" />
                    <span>Dosya SeÃ§ / SÃ¼rÃ¼kle BÄ±rak</span>
                </label>
                <div id="selectedFileName" class="gm-selected-file">
                    HenÃ¼z dosya seÃ§ilmedi.
                </div>

                <p class="gm-info">
                    Verileriniz sadece local ortamÄ±nÄ±zdaki <strong>FastAPI</strong> servisine gider
                    (<code>http://localhost:8100</code>). MVPâ€™de Ã¼yelik yok, dosyalar kÄ±sa sÃ¼re tutulur.
                </p>
            </div>

            <div class="gm-card gm-scenario-list-card">
                <h2>2. Senaryonu SeÃ§</h2>
                <p class="gm-muted">MVPâ€™de ÅŸimdilik 2 senaryo aktif.</p>

                <button class="gm-scenario-btn gm-scenario-btn-active"
                        data-scenario="count-value">
                    <span class="gm-scenario-title">Belirli deÄŸeri say</span>
                    <span class="gm-scenario-desc">
                        Ã–rneÄŸin, <strong>Durum</strong> sÃ¼tununda kaÃ§ satÄ±rda â€œOnaylandÄ±â€ yazÄ±yor?
                    </span>
                </button>

                <button class="gm-scenario-btn"
                        data-scenario="count-multi">
                    <span class="gm-scenario-title">Ã‡oklu koÅŸulla satÄ±r say</span>
                    <span class="gm-scenario-desc">
                        Ã–rneÄŸin, <strong>Sehir = Istanbul</strong> VE <strong>Durum = Aktif</strong> VE
                        <strong>Tarih &gt;= 01.02.2024</strong> kaÃ§ satÄ±r?
                    </span>

                </button>
		<button class="gm-scenario-btn"
        		data-scenario="sum-if">
    		    <span class="gm-scenario-title">Tek koÅŸula gÃ¶re toplam deÄŸer</span>
   		    <span class="gm-scenario-desc">
        		Ã–rneÄŸin, <strong>Durum = Ã–dendi</strong> olan satÄ±rlardaki <strong>Tutar</strong> toplamÄ±.
    		    </span>
		</button>
            </div>
        </section>

        <!-- SaÄŸ taraf: seÃ§ilen senaryo iÃ§in form + sonuÃ§lar -->
        <section class="gm-right-pane">
            <div class="gm-card gm-scenario-card">
                <h2 id="scenarioTitle">3. Senaryo AyarlarÄ±</h2>
                <p id="scenarioSubtitle" class="gm-muted">
                    Soldan bir senaryo seÃ§, burada detaylarÄ±nÄ± doldur.
                </p>

                <!-- Senaryo 1: Tek sÃ¼tunda belirli deÄŸeri say -->
                <form id="formCountValue" class="gm-scenario-form">
                    <div class="gm-form-row">
                        <label for="cvColumn">SÃ¼tun adÄ±</label>
                        <input type="text" id="cvColumn" placeholder="Ã–rn: Durum" required />
                    </div>

                    <div class="gm-form-row">
                        <label for="cvValue">Aranacak deÄŸer</label>
                        <input type="text" id="cvValue" placeholder="Ã–rn: OnaylandÄ±" required />
                    </div>

                    <div class="gm-form-row gm-form-row-inline">
                        <label class="gm-checkbox-label">
                            <input type="checkbox" id="cvExcelOutput" />
                            <span>FiltrelenmiÅŸ satÄ±rlarÄ± Excel olarak indir</span>
                        </label>
                    </div>

                    <div class="gm-form-actions">
                        <button type="submit" class="gm-primary-btn">
                            Senaryoyu Ã‡alÄ±ÅŸtÄ±r
                        </button>
                    </div>
                </form>

                <!-- Senaryo 2: Ã‡oklu koÅŸulla satÄ±r say -->
                <form id="formCountMulti" class="gm-scenario-form gm-hidden">
                    <div id="multiConditions" class="gm-conditions-wrapper">
                        <!-- KoÅŸul satÄ±rlarÄ± JS ile eklenecek -->
                    </div>

                    <button type="button" id="btnAddCondition" class="gm-secondary-btn gm-add-cond-btn">
                        + KoÅŸul Ekle
                    </button>

                    <p class="gm-muted gm-small">
                        OperatÃ¶rler Ã¶rnekleri: <code>eq</code> (eÅŸit), <code>ne</code> (eÅŸit deÄŸil),
                        <code>gt</code> (&gt;), <code>gte</code> (&gt;=), <code>lt</code> (&lt;),
                        <code>lte</code> (&lt;=), <code>contains</code>, <code>in</code> (Ã¶rn:
                        <code>Istanbul;Ankara</code>).
                    </p>

                    <div class="gm-form-row gm-form-row-inline">
                        <label class="gm-checkbox-label">
                            <input type="checkbox" id="cmExcelOutput" />
                            <span>FiltrelenmiÅŸ satÄ±rlarÄ± Excel olarak indir</span>
                        </label>
                    </div>

                    <div class="gm-form-actions">
                        <button type="submit" class="gm-primary-btn">
                            Senaryoyu Ã‡alÄ±ÅŸtÄ±r
                        </button>
                    </div>
                </form>

		<!-- Senaryo 3: Tek koÅŸula gÃ¶re toplam deÄŸer (SUMIF) -->
		<form id="formSumIf" class="gm-scenario-form gm-hidden">
    		   <div class="gm-form-row">
        	       <label for="sfConditionColumn">KoÅŸul sÃ¼tunu</label>
                       <input type="text" id="sfConditionColumn" placeholder="Ã–rn: Durum" required />
                   </div>

                   <div class="gm-form-row">
                       <label for="sfConditionValue">KoÅŸul deÄŸeri</label>
                       <input type="text" id="sfConditionValue" placeholder="Ã–rn: Ã–dendi" required />
                   </div>

                   <div class="gm-form-row">
                       <label for="sfTargetColumn">Toplanacak sÃ¼tun</label>
                       <input type="text" id="sfTargetColumn" placeholder="Ã–rn: Tutar" required />
                   </div>

                   <div class="gm-form-row gm-form-row-inline">
                       <label class="gm-checkbox-label">
                           <input type="checkbox" id="sfExcelOutput" />
                           <span>FiltrelenmiÅŸ satÄ±rlarÄ± Excel olarak indir</span>
                       </label>
                   </div>

                   <div class="gm-form-actions">
                       <button type="submit" class="gm-primary-btn">
                          Senaryoyu Ã‡alÄ±ÅŸtÄ±r
                       </button>
                   </div>
               </form>
            </div>

                        <div class="gm-card gm-result-card">
                <h2>SonuÃ§</h2>
                <div id="statusMessage" class="gm-status"></div>
                <pre id="resultJson" class="gm-result-json">// Ã‡alÄ±ÅŸtÄ±rdÄ±ÄŸÄ±n senaryonun Ã¶zeti burada gÃ¶rÃ¼necek.</pre>
            </div>

            <!-- Senaryo Rehberi -->
            <div class="gm-card gm-help-card">
                <h2>SeÃ§ili senaryo iÃ§in mini kÄ±lavuz</h2>

                <h3 id="scenarioHelpTitle" class="gm-help-title">
                    Bir senaryo seÃ§tiÄŸinde burada aÃ§Ä±klamasÄ± gÃ¶rÃ¼necek.
                </h3>

                <h4 class="gm-help-subtitle">Nedir?</h4>
                <p id="scenarioWhatIs" class="gm-help-text">
                    Soldan bir senaryo seÃ§; bu alan sana o senaryonun ne iÅŸe yaradÄ±ÄŸÄ±nÄ±,
                    hangi durumlarda kullanabileceÄŸini herkesin anlayacaÄŸÄ± dille anlatÄ±r.
                </p>

                <h4 class="gm-help-subtitle">NasÄ±l kullanÄ±lÄ±r?</h4>
                <ul id="scenarioHowTo" class="gm-help-list">
                    <li>DosyanÄ± yÃ¼kle, senaryoyu seÃ§, adÄ±mlarÄ± doldur.</li>
                    <li>Burada her adÄ±mÄ±n ne iÅŸe yaradÄ±ÄŸÄ±nÄ± maddeler halinde gÃ¶receksin.</li>
                </ul>

                <h4 class="gm-help-subtitle">Ã–rnek kullanÄ±m</h4>
                <ul id="scenarioExamples" class="gm-help-list">
                    <li>Ã–rnek senaryolar, seÃ§tiÄŸin iÅŸlemi gerÃ§ek hayattaki Ã¶rneklerle aÃ§Ä±klar.</li>
                </ul>
            </div>
        </section>
    </main>


    <footer class="gm-footer">
        <span>opradox MVP â€“ Local Dev</span>
        <span>Backend: FastAPI â€¢ Frontend: HTML + CSS + JS</span>
    </footer>
</div>
<!-- Geri Bildirim Butonu -->
<button id="feedbackButton" class="gm-feedback-button">
  ğŸ’¬ Yorum / Ã–neri / TeÅŸekkÃ¼r
</button>

<!-- Geri Bildirim Modal -->
<div id="feedbackModal" class="gm-feedback-modal">
  <div class="gm-feedback-modal-content">
    <button id="feedbackClose" class="gm-feedback-close" type="button">&times;</button>
    <h2 class="gm-feedback-title">opradox'e geri bildirim bÄ±rak</h2>

    <form id="feedbackForm" class="gm-feedback-form">
      <label for="feedbackType">Mesaj tÃ¼rÃ¼</label>
      <select id="feedbackType">
        <option value="comment">Yorum</option>
        <option value="suggestion">Ã–neri</option>
        <option value="thanks">TeÅŸekkÃ¼r</option>
        <option value="bug">Hata bildirimi</option>
        <option value="contact">Bize ulaÅŸÄ±n</option>
      </select>


      <label for="feedbackMessage">MesajÄ±n</label>
      <textarea id="feedbackMessage" rows="4" placeholder="Buraya yaz..." required></textarea>

      <label for="feedbackName">Ä°sim / takma ad (opsiyonel)</label>
      <input id="feedbackName" type="text" placeholder="Ä°smin (isteÄŸe baÄŸlÄ±)" />

      <label for="feedbackEmail">E-posta (opsiyonel)</label>
      <input id="feedbackEmail" type="email" placeholder="E-posta (isteÄŸe baÄŸlÄ±)" />

      <div id="feedbackStatus" class="gm-feedback-status"></div>

      <button type="submit" class="gm-feedback-submit">
        GÃ¶nder
      </button>
    </form>
  </div>
</div>
</body>
</html>
